<title>
  <%= title %>
</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" />
<script src="https://kit.fontawesome.com/00d76a4bef.js" crossorigin="anonymous"></script>

<link rel='stylesheet' href='/stylesheets/style.css'>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


<%- include('header'); -%>
  <section class="featured">
    <div class="content-wrapper">
      <h1 id="myHeader" class="text-4xl">
        <%= title %>
      </h1>
    </div>
  </section>
  <div class="px-4 sm:px-6 lg:px-8 xl:px-24 max-w-screen-xl mx-auto w-full bg-orange-100">

    <form action="/addstudent/" method="post" class="flex flex-col  px-4 rounded-md shadow-md">
      <input aria-label="Enter student name" type="text" name="stname" placeholder="Student name" required
        autocomplete="off"
        class="font-serif text-sm uppercase text-gray-base w-3/4 mt-2 mr-3 py-2 px-4  border  border-gray-300 rounded mb-1" />
      <input aria-label="Enter father's name" type="text" name="frname" placeholder="Father's name" autocomplete="off"
        class="text-sm font-serif uppercase text-gray-base w-3/4 mt-2 mr-3 py-2 px-4  border  border-gray-300 rounded mb-1" />
      <input aria-label="Enter mother's name" type="text" name="mrname" placeholder="Mother's name" autocomplete="off"
        class="text-sm font-serif uppercase text-gray-base w-3/4 mt-2 mr-3 py-2 px-4  border  border-gray-300 rounded mb-1" />
      <div class="flex sm:flex-row flex-col">
        <label for="stdob"
          class="text-sm font-mono text-blue-900 text-gray-base w-full sm:w-1/6 max-w-[140px] mt-2 mr-3 py-2 px-4  mb-1">Date
          of birth</label>
        <input aria-label="DOB" type="date" id="stdob" name="stdob" placeholder="Date of Birth" autocomplete="off"
          class="text-sm font-mono text-blue-900 text-gray-base w-full sm:w-1/4 max-w-[180px] mt-2 mr-3 py-2 px-4 border border-gray-300 rounded mb-1" />

        <input aria-label="Aadhar" type="text" name="staadhar" placeholder="Aadhar number" autocomplete="off"
          maxlength="12" minlength="12"
          class="text-sm font-mono text-blue-900 text-gray-base w-full sm:w-1/4 max-w-[200px] mt-2 mr-3 py-2 px-4 border border-gray-300 rounded mb-1" />

        <input aria-label="Mobile" type="number" name="stnumber" placeholder="Mobile number" autocomplete="off"
          min="5555555555" max="9999999999"
          class="text-sm font-mono text-blue-900 text-gray-base w-full sm:w-1/4 max-w-[180px] mt-2 mr-3 py-2 px-4 border border-gray-300 rounded mb-1" />
      </div>

      <div class="flex sm:flex-row flex-col">
        <input aria-label="Enter roll number" type="text" name="stroll" placeholder="Roll number" required
          autocomplete="off"
          class="text-sm font-mono w-full sm:w-1/6 max-w-[180px] text-gray-base mt-2 mr-3 py-2 px-4  border  border-gray-300 rounded mb-1" />

        <select id="stclass" name="stclass" required
          class="text-sm  mr-3 font-serif  py-2 px-4 border border-gray-300 w-full sm:w-1/5 max-w-[180px]  rounded mb-1">
          <option value=""> Please select</option>
          <% for (var i=0; i<classdata.length; i++){ %>
            <option value='<%= classdata[i].class %>'>
              <%= classdata[i].class %>
            </option>
            <% } %>
        </select>
        <select id="stsec" name="stsec"
          class="text-sm  mr-3 font-serif  py-2 px-4 border border-gray-300 w-full sm:w-1/5 max-w-[180px]  rounded mb-1">
          <option value="" disabled selected hidden>No section</option>
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
        </select>
        <select name="cmbGender" id="cmbGender" required
          class="text-sm  mr-3 font-serif  py-2 px-4 border border-gray-300 w-full sm:w-1/6 max-w-[180px]  rounded mb-1">
          <option value="Male" selected>Male</option>
          <option value="Female">Female</option>
        </select>
      </div>
      <div class="flex sm:flex-row flex-col">
        <input aria-label="Address" type="text" name="stadd1" placeholder="Address line1" autocomplete="off"
          class="text-sm uppercase font-serif text-gray-base mt-2 mr-3 py-3 px-4 w-full sm:w-2/3 max-w-[300px] border  border-gray-300 rounded mb-1" />
        <input aria-label="Address" type="text" name="stadd2" placeholder="Address line2" autocomplete="off"
          class="text-sm font-serif uppercase text-gray-base mt-2 mr-3 py-3 px-4 w-full sm:w-2/3 max-w-[300px] border  border-gray-300 rounded mb-1" />
      </div>
      <div class="flex sm:flex-row flex-col">
        <input aria-label="Pin" type="number" id="pincode" name="stpin" placeholder="Pin code" autocomplete="on"
          min="100000" max="999999"
          class="text-sm font-mono text-blue-900 text-gray-base w-full sm:w-2/3 max-w-[300px] mt-2 mr-3 py-3 px-4 border border-gray-300 rounded mb-1" />
        <input aria-label="Address" type="text" id="district" name="stdistrict" placeholder="District"
          autocomplete="off"
          class="text-sm font-serif text-gray-base w-full sm:w-2/3 max-w-[300px] mt-2 mr-3 py-3 px-4 border border-gray-300 rounded mb-1 uppercase" />


        <!-- <div class="mt-4 mb-4">
        <button id="openCameraBtn" type="button" class="bg-blue-500 text-white px-4 py-2 rounded">Open Camera</button>
        <button id="clickPhotoBtn" type="button" class="bg-green-500 text-white px-4 py-2 rounded hidden">Take
          Photo</button>
        <video id="cameraStream" width="300" autoplay class="mt-2 hidden"></video>
        <canvas id="canvas" width="300" height="200" class="hidden"></canvas>
      </div> -->

        <button type="submit"
          class="bg-green-400 py-3 w-3/4 mb-10 mr-3 font-serif  rounded-lg hover:bg-green-600 hover:rounded-full text-sm">
          Submit
        </button>
    </form>
  </div>

  <%- include('footer'); -%>
<script src="/js/autofill-address.js"></script>

    <!-- <script>
      const openCameraBtn = document.getElementById('openCameraBtn');
      const clickPhotoBtn = document.getElementById('clickPhotoBtn');
      const video = document.getElementById('cameraStream');
      const canvas = document.getElementById('canvas');
      let stream;

      openCameraBtn.addEventListener('click', async function () {
        try {
          stream = await navigator.mediaDevices.getUserMedia({ video: true });
          video.srcObject = stream;
          video.classList.remove('hidden');
          clickPhotoBtn.classList.remove('hidden');
        } catch (err) {
          alert('Camera access denied.');
          console.error(err);
        }
      });

      clickPhotoBtn.addEventListener('click', async function () {
        const stclass = document.querySelector('[name="stclass"]').value.toUpperCase();
        const stsec = document.querySelector('[name="stsec"]').value.toUpperCase();
        const stroll = document.querySelector('[name="stroll"]').value;
        const filename = `${stclass}${stsec}${stroll}.jpg`;

        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

        const imageBlob = await new Promise(function (resolve) {
          canvas.toBlob(resolve, 'image/jpeg');
        });

        if (stream) {
          stream.getTracks().forEach(function (track) {
            track.stop();
          });
        }

        video.classList.add('hidden');
        clickPhotoBtn.classList.add('hidden');

        const formData = new FormData();
        formData.append('photo', imageBlob, filename);

        fetch('/uploadphoto', {
          method: 'POST',
          body: formData
        })
          .then(function (res) {
            return res.text();
          })
          .then(function (msg) {
            alert('Photo uploaded as ' + filename);
          })
          .catch(function (err) {
            console.error(err);
            alert('Error uploading photo');
          });
      });
    </script> -->